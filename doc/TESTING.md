# ðŸ§ª Testing Documentation

## MSW Mock Alignment

**Status**: âœ… Complete alignment between MSW handlers and E2E api-mocks

### Changes Applied
- **Missing Endpoints**: Added `/checkout`, `/orders`, `/categories`, `/auth/profile`
- **Response Structure**: Aligned with pagination `{ data, total }`
- **Mock Data**: Rich Greek marketplace data with producers and categories
- **Auth Flow**: Enhanced with `user + token` structure

### Usage
MSW handlers now provide identical API coverage as E2E api-mocks for consistent testing across unit/integration/E2E levels.

## Test Commands

```bash
# Unit tests with coverage
npm run test:unit

# E2E smoke tests (MSW enabled)
npm run e2e:smoke

# Full E2E suite
npm run e2e:full

# Watch mode for development
npm run test:watch
```

## Checkout API Testing

### MSW Setup for Checkout Tests
- **Greek Postal Zones**: Athens (â‚¬3.5), Thessaloniki (â‚¬4.0), Islands (â‚¬8.0), Other (â‚¬5.5)
- **Error Scenarios**: Network failures, timeouts, validation errors, server errors
- **Retry Logic**: 2 retries with 300ms base delay and exponential backoff
- **Greek Error Messages**: Localized error responses for better UX

### Key Test Files
- `tests/unit/checkout-api-extended.spec.ts` - Comprehensive resilience testing
- `tests/msw/checkout.handlers.ts` - MSW mock handlers for checkout APIs
- `src/lib/api/checkout.ts` - Main checkout API with resilience patterns

*Generated by Claude Code*