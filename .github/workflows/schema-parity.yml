name: Verify schema.ci.prisma â†” schema.prisma parity
on:
  pull_request:
    branches: [ main, develop ]
jobs:
  parity:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Check diff
        working-directory: frontend
        run: |
          if [ -f prisma/schema.prisma ] && [ -f prisma/schema.ci.prisma ]; then
            git diff --no-index --quiet prisma/schema.prisma prisma/schema.ci.prisma || {
              echo "::error::schema.prisma and schema.ci.prisma differ"
              exit 1
            }
          else
            echo "No prisma schemas to compare; skipping."
          fi
