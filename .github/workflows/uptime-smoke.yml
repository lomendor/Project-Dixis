name: Uptime Smoke
on:
  schedule: [{cron: "*/10 * * * *"}]
  workflow_dispatch:
jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - name: Probe healthz on prod domains
        run: |
          set -e
          for URL in https://dixis.gr/api/healthz https://dixis.io/api/healthz; do
            echo "Probing $URL"
            if curl -fsS "$URL" | grep -qi healthy; then
              echo "OK: $URL"; exit 0
            fi
          done
          echo "‚ùå All probes failed"; exit 1
