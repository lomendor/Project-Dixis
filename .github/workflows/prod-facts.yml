name: PROD Facts - Daily Monitoring

on:
  # Manual trigger
  workflow_dispatch:

  # Daily at 07:00 UTC
  schedule:
    - cron: '0 7 * * *'

jobs:
  check-production:
    name: Check Production Endpoints
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run PROD facts script
        run: bash scripts/prod-facts.sh

      - name: Upload PROD facts report
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: prod-facts-report
          path: docs/OPS/PROD-FACTS-LAST.md
          retention-days: 30
