# PROD FACTS - Last Check

**Last Updated**: 2025-12-21 10:16:59 UTC
**Status**: ✅ ALL SYSTEMS OPERATIONAL (recovered from outage, incident: 2025-12-21-prod-outage-hostname.md)

---

## Endpoint Status

| Endpoint | Status | Details |
|----------|--------|---------|
| Backend Health | ✅ 200 | `/api/healthz` returns OK |
| Products API | ✅ 200 | `/api/v1/public/products` returns data |
| Products List | ✅ 200 | `/products` displays products (not empty) |
| Product Detail | ✅ 200 | `/products/1` shows product content |
| Login Page | ✅ 200 | `/login` accessible (redirects to `https://dixis.gr/auth/login`) |
| Orders Page | ✅ 200 | `/orders` accessible (Pass 13 fix deployed) |

---

## Content Verification

- ✅ Backend health endpoint returns `"ok"`
- ✅ Products API contains `"data"` field
- ✅ Products list page shows products (no empty state)
- ✅ Product detail page contains expected content
- ✅ Login page accessible (with or without redirect)
- ✅ Orders page accessible (no longer 404)

---

## Infrastructure Status

### Process Management

| Component | Manager | Status | Details |
|-----------|---------|--------|---------|
| Backend (API) | PM2 | ✅ Online | PID 862, managed by PM2 user deploy |
| Frontend (Next.js) | systemd | ✅ Active | PID 720, managed by systemd as root |

**Important**: Frontend switched from PM2 to systemd on 2025-12-21 due to IPv6 binding issue (see incident doc).

### Network Binding

- Backend: `127.0.0.1:8001` (Laravel API)
- Frontend: `127.0.0.1:3000` (Next.js) - **IPv4 only** (HOSTNAME=127.0.0.1)
- Nginx: Reverse proxy 443→3000 (frontend), 443→8001 (backend API)

### Auto-Start Configuration

- Backend: PM2 resurrect (user deploy)
- Frontend: systemd launcher service (`dixis-frontend-launcher.service` enabled)

---

## Next Check

Automated checks run daily at 07:00 UTC via GitHub Actions workflow.

Manual trigger: `gh workflow run prod-facts.yml`

Command line: `bash scripts/prod-facts.sh`

VPS state: `ssh dixis-prod 'pm2 list && sudo systemctl status dixis-frontend-launcher.service'`

---

**Generated by**: scripts/prod-facts.sh + manual update (2025-12-21 post-incident)
