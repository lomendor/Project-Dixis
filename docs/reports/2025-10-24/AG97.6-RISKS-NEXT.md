# AG97.6 â€” RISKS-NEXT

## Risks
- **ÎœÎ·Î´ÎµÎ½Î¹ÎºÏŒ**: Î‘Ï€Î»Î® Î¼ÎµÏ„Î±ÎºÎ¯Î½Î·ÏƒÎ· Î±ÏÏ‡ÎµÎ¯Î¿Ï…, Ï‡Ï‰ÏÎ¯Ï‚ Î±Î»Î»Î±Î³Î® Ï€ÎµÏÎ¹ÎµÏ‡Î¿Î¼Î­Î½Î¿Ï…
- **Test content unchanged**: Zero logic changes
- **Path update only**: Workflow points to new location

## Testing Strategy
- **pg-e2e workflow**: Will discover and execute test
- **Seed â†’ API â†’ Test**: Full validation flow
  1. CI seed route creates 10 orders (4 pending, 2 shipped, 1 cancelled, 3 processing)
  2. API `/api/admin/orders/facets` calls PG aggregation provider
  3. Test validates `provider: 'pg'` and exact facet counts

## Expected Result
- âœ… **Test discovery**: Playwright finds test in testDir
- âœ… **Test execution**: Seeds â†’ API call â†’ assertions pass
- âœ… **Validation**: PG aggregation provider works end-to-end

## AG97 Cycle Completion
If this passes, **AG97 series complete**! ğŸ‰

### What We've Built
1. **AG97.0**: Facet provider skeleton
2. **AG97-prep**: Prisma schema discovery
3. **AG97.1**: PG facet provider (Prisma groupBy)
4. **AG97.2**: PG provider wired to API (env-guarded)
5. **AG97.3**: CI seed route + E2E test
6. **AG97.4**: Prisma db push for ephemeral CI
7. **AG97.5**: ESM __dirname fix (webServer startup)
8. **AG97.6**: Test path fix (Playwright discovery)

### End-to-End Flow Validated
- âœ… Database aggregations via Prisma groupBy
- âœ… Environment-based provider switching
- âœ… CI seed infrastructure
- âœ… ESM compatibility
- âœ… Full E2E test coverage

## Next
- **If green**: AG97 DONE, move to next feature
- **If fails**: Analyze specific failure and micro-fix
